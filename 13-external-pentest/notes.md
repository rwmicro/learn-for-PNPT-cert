# External Pentest Playbook

## Methodologie d'un pentest externe

1. **Scoping** : definir le perimetre (IPs, domaines, regles d'engagement)
2. **OSINT / Reconnaissance passive**
3. **Scanning et enumeration**
4. **Exploitation**
5. **Post-exploitation et mouvement lateral**
6. **Reporting**

## Phase 1 : OSINT

- Enumeration des employes (LinkedIn, site web)
- Recherche d'emails (Hunter.io, Phonebook.cz)
- Google Dorks, Shodan, Censys
- Recherche de breaches (DeHashed)
- Voir notes OSINT pour les details

## Phase 2 : Scanning

```bash
# Decouverte initiale
nmap -Pn -sS -T4 -p- -oN all_ports.txt CIBLE

# Scan detaille sur les ports ouverts
nmap -sC -sV -p PORTS -oN detailed.txt CIBLE

# Scan de vulnerabilites
nmap --script=vuln -p PORTS CIBLE
```

## Phase 3 : Enumeration des services exposes

- **Web** : gobuster, nikto, test manuel (OWASP)
- **Email** : test de credentials (password spraying)
- **VPN** : test de credentials
- **SSH/RDP** : brute force cible
- **SMB** : acces anonyme, shares

## Phase 4 : Exploitation

### Password Spraying

```bash
# Sur OWA / O365
# Utiliser des mots de passe courants : Season+Year, Company+123, etc.
crackmapexec smb IP -u users.txt -p 'Password123!' --no-bruteforce
```

### Acces initial courants

- Credentials dans des breaches
- Password spraying reussi
- Application web vulnerable
- VPN avec credentials faibles
- Phishing (si dans le scope)

## Phase 5 : Post-exploitation

- Enumeration interne
- Mouvement lateral
- Escalade de privileges
- Voir notes AD et post-exploitation

## Rapport

Voir notes sur le report writing.
